<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Auth Callback</title>
    <style>
        html, body {
            margin: 0;
            width: 0;
            height: 0;
            overflow: hidden;
            background: transparent;
        }
    </style>
    <script>
        (function () {
            var params = new URLSearchParams(window.location.search);
            var payload = {type: "keybound-auth-callback"};
            params.forEach(function (value, key) {
                payload[key] = value;
            });

            var openedAsPopup = !!(window.opener && !window.opener.closed && window.opener !== window);

            if (openedAsPopup) {
                window.opener.postMessage(payload, window.location.origin);
                window.close();
                return;
            }

            if (window.parent !== window) {
                window.parent.postMessage(payload, window.location.origin);
                return;
            }
        })();
    </script>
</head>
<body></body>
</html>
